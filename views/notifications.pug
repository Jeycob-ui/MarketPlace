extends layout

block styles 
    link(rel="stylesheet", href="/notificaciones.css")

block content
  h1 Notificaciones de compras
  if !items || items.length === 0
    p.LETRAS No hay compras recientes.
  else
    ul
      each it in items
        li
          // Estado del pedido
          if it.Order && it.Order.status
            - const st = it.Order.status
            span.status-badge(class=`status-${st}`)
              if st === 'pending'
                | Pendiente
              else if st === 'paid'
                | Pagado
              else if st === 'shipped'
                | Enviado
              else if st === 'cancelled'
                | Cancelado
          b Producto: 
          | #{it.Product ? it.Product.title : 'N/D'}
          |  — Cantidad: #{it.quantity} — Precio: $#{it.price}
          br
          b Comprador: 
          | #{it.Order && it.Order.User ? it.Order.User.name : 'N/D'}
          |  (#{it.Order && it.Order.User ? it.Order.User.email : 'N/D'})
          br
          if it.Product && it.Product.User
            b Vendedor: 
            | #{it.Product.User.name} (#{it.Product.User.email})
            br
          - const fecha = new Date(it.createdAt).toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' })
          small Fecha: #{fecha}
